{% extends "base.html" %}
{% load static %}

{% block title %}{% if not form.instance.pk %}Submit new{% else %}Edit{% endif %} thread{% endblock %}

{% block content %}
    <div class="row col-md-6">
        <form method="post" enctype="multipart/form-data">
	        {% csrf_token %}
            {% if not form.instance.pk or admin_view %}
            <div class="form-group">
	            <label for="id_thread_type">Type:</label>
	            {{ form.thread_type }}
            </div>
            {% endif %}
            {% if not form.instance.pk or admin_view or form.instance.thread_type == 'LL' %}
            <div class="form-group" id="url_group">
	            <label for="id_link">URL:</label>
	            {{ form.link }}
	            {{ form.link.errors }}
            </div>
            {% endif %}
            <div class="form-group">
	            <label for="id_title">Title:</label>
	            {{ form.title }}
	            {{ form.title.errors }}
            </div>
            <div class="form-group">
	            <label for="id_text">Summary:</label>
	            {{ form.text }}
	            {{ form.text.errors }}
            </div>
            <div class="form-group">
	            <label for="id_tags">Categories:</label>
	            {{ form.tags }}
	            {{ form.tags.errors }}
            </div>
            <div class="form-group">
	            <label for="id_image">Image:</label>
	            {% if form.image.value %}
		            <img src="{{ MEDIA_URL }}{{ form.image.value }}" />
	            {% endif %}
	            {{ form.image }}
	            {{ form.image.errors }}
            </div>

            <button type="submit" class="btn btn-primary pull-right">Submit</button>
        </form>
    </div>

{{ form.media }}
{% if not form.instance.pk or admin_view %}
<script>
$('#id_thread_type').on('change', function() {
	if ($(this).val() == 'LL')
		$('#url_group').show();
	else
		$('#url_group').hide();
});
$('#id_thread_type').triggerHandler('change');
</script>
{% endif %}
{% endblock %}


{% block rightcolumn %}
{% endblock %}